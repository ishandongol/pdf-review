import{c as g,r as a,a as j,u as m,w as y,x as C,j as e,F as R}from"./index-B9KG-C9s.js";import{w as S}from"./withAuthenticatedLayout-BXCn2NS4.js";import{B as b}from"./BaseLayout-BZhe71E4.js";import{P as F,g as L,h as N,i as P,S as w,u as v}from"./PdfView-DKX81GJN.js";import{B as u}from"./badge-CeLC32LW.js";import{C as U,a as _,b as A,e as B,f as E}from"./card-DTMVk1lh.js";import"./button-BYb--igQ.js";import"./index-DMSvsgDf.js";const k=()=>{const{student:i,fileId:r}=D.useParams(),[f,l]=a.useState(!1),o=j(),t=m(s=>s.studentReviews.currentFileReview),h=m(s=>s.studentReviews.isLoading),[c,p]=a.useState("");a.useEffect(()=>{i&&r&&o(y({student_folder:i,file_id:r}))},[i,o,r]);const d=a.useCallback(async()=>{var s;if(t)try{l(!0);const x=await C({student:t.student_folder,file:t.file_name});p(((s=x.data)==null?void 0:s.signedUrl)||""),l(!1)}finally{l(!1)}},[t]);a.useEffect(()=>{d()},[d]);const n=(t==null?void 0:t.reviews)||[];return e.jsxs(b,{children:[h||f&&e.jsx(R,{}),e.jsxs(F,{children:[e.jsx(L,{children:c&&e.jsx(N,{reviews:n,url:c})}),e.jsx(P,{children:e.jsxs(w,{className:"h-[calc(theme(height.screen)-theme(spacing.10))] p-4",children:[n.length>0&&e.jsxs("div",{className:"font-medium mb-2",children:["Reviews by ",e.jsx(u,{variant:"secondary",children:t==null?void 0:t.user_id})]}),n.length===0&&e.jsx("div",{className:"font-medium mt-4 mb-2 h-72 flex items-center justify-center",children:"No Reviews"}),n.map(s=>e.jsxs(U,{className:"cursor-pointer mt-2",role:"button",onClick:()=>{v(s)},children:[e.jsx(_,{children:e.jsx(A,{className:" leading-relaxed",children:s.comment.text})}),e.jsxs(B,{children:[s.content.text?e.jsx("blockquote",{className:" font-thin line-clamp-3 my-2",children:s.content.text}):null,s.content.image?e.jsx("div",{className:" my-2",children:e.jsx("img",{src:s.content.image,alt:"Screenshot"})}):null]}),e.jsxs(E,{className:"flex items-center justify-start gap-2",children:["Page ",s.position.pageNumber," ",e.jsx(u,{variant:"secondary",children:"PDF"})]})]},s.id))]})})]})]})},D=g("/reviews/folder/$student/file/$fileId")({component:S(k,"File Review Page")});export{D as Route};
